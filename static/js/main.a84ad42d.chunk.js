(this["webpackJsonpascii-pong"]=this["webpackJsonpascii-pong"]||[]).push([[0],{10:function(e,r,t){},11:function(e,r,t){"use strict";t.r(r);var n=t(1),a=t(0),c=t.n(a),o=t(4),i=t.n(o),u=(t(10),t(2)),s=function(){for(var e=[],r=33;r<=255;r++)(r<127||r>160)&&e.push(r);var t=e[Math.round(Math.random()*e.length)];return String.fromCharCode(t)},l=function(e,r){for(var t="\n    <section>----------------------------\n    |                                   |\n    |                                   |\n    |        <h1>ASCII Pong</h1>        |\n    |                                   |\n    |                                   |\n    |                                   |\n    |  <option>------   <option>------  |\n    |  |     1P     |   |     2P     |  |\n    |  -----</option>   -----</option>  |\n    |                                   |\n    |                                   |\n    |        <button>-----------        |\n    |        |      Start      |        |\n    |        ----------</button>        |\n    |                                   |\n    |                                   |\n    |                                   |\n    ---------------------------</section>".split("\n").filter((function(e){return""!==e})).map((function(e){return e.trim()})),n=[],a=0;a<t.length;a++){for(var c=[],o=0;o<t[0].length;o++)c.push({char:t[a][o]});n.push(c)}return n},f=["\n \u2588\u2588\u2588 \n\u2588   \u2588\n\u2588   \u2588\n\u2588   \u2588\n \u2588\u2588\u2588 ","\n    \u2588\n    \u2588\n    \u2588\n    \u2588\n    \u2588","\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588\n\u2588    \n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588   \u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n    \u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588    \n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588    \n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n    \u2588\n    \u2588\n    \u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588"],p=function(e){return f[e].split("\n").filter((function(e){return""!==e})).map((function(e){return e.split("")}))};window.getLanding=l,window.getNum=p;var v=function(e){var r=e.char,t=e.active,c=e.selected,o=e.handleClick,i=e.isBall,u=Object(a.useRef)();return Object(n.jsx)("div",{className:"\n        char-tile\n        ".concat(t?"active":"","\n        ").concat(c?"selected":"","\n        ").concat(o?"is-clickable":"","\n        ").concat(i?"ball":"","\n      "),ref:u,onClick:o,children:r})},d=c.a.memo(v),h="SETTILES",y="SETTILE",g="SETCLICKHANDLER",x="SETPLAYERS",b="INCREMENTSCORE",m="RESETSCORE",S=function(e,r){var t,n,a=Object.assign({},e);switch(r.type){case h:return a.tileMatrix=r.payload,a;case y:t=r.payload.x,n=r.payload.y;var c=r.payload,o=c.char,i=c.properties;return a.tileMatrix[n][t].char=o,a.tileMatrix[n][t].properties=i,a;case g:t=r.payload.x,n=r.payload.y;var u=r.payload.handleClick;return a.tileMatrix[n][t].properties.handleClick=u,a;case x:var s=r.payload,l=s.offsetX,f=s.offsetY;if(a.players=r.payload.players,1===a.players){for(var p=7;p<=9;p++)for(var v=3;v<=16;v++)8===p?[3,9,10,16].includes(v)&&(a.tileMatrix[p+f][v+l].properties.selected=!0):a.tileMatrix[p+f][v+l].properties.selected=!0;for(var d=7;d<=9;d++)for(var S=20;S<=33;S++)8===d?[20,26,27,33].includes(S)&&(a.tileMatrix[d+f][S+l].properties.selected=!1):a.tileMatrix[d+f][S+l].properties.selected=!1}else{for(var j=7;j<=9;j++)for(var M=3;M<=16;M++)8===j?[3,9,10,16].includes(M)&&(a.tileMatrix[j+f][M+l].properties.selected=!1):a.tileMatrix[j+f][M+l].properties.selected=!1;for(var O=7;O<=9;O++)for(var w=20;w<=33;w++)8===O?[20,26,27,33].includes(w)&&(a.tileMatrix[O+f][w+l].properties.selected=!0):a.tileMatrix[O+f][w+l].properties.selected=!0}return a;case b:var E=e.gameState.score["p".concat(r.payload.player)];return a.gameState.score["p".concat(r.payload.player)]=E+r.payload.score,a;case m:return a.gameState.score.p1=0,a.gameState.score.p2=0,a;default:return e}},j={tileMatrix:[],players:2,gameState:{landing:!0,game:!1,winnder:void 0,score:{p1:0,p2:0}}},M=function(){var e=Object(a.useReducer)(S,j),r=Object(u.a)(e,2),t=r[0],c=r[1],o=Object(a.useState)(),i=Object(u.a)(o,2),f=i[0],v=i[1],M=Object(a.useState)(),O=Object(u.a)(M,2),w=O[0],E=O[1],R=Object(a.useState)(!1),C=Object(u.a)(R,2),T=C[0],k=C[1],L=Object(a.useRef)(T),A=Object(a.useRef)(f),P=Object(a.useRef)(w),I=function(){var e=.75*Math.random()+.25,r=Math.random(),t=0===Math.round(Math.random())?-1:1,n=0===Math.round(Math.random())?-1:1,a=Math.sqrt(Math.pow(e,2)+Math.pow(r,2));return{x:t*e/a,y:n*r/a}},N=Object(a.useState)(I()),B=Object(u.a)(N,2),W=B[0],G=B[1],D=Object(a.useState)({x:0,y:0}),H=Object(u.a)(D,2),K=H[0],Y=H[1],J=Object(a.useRef)(W),U=Object(a.useRef)(K),X=function(e,r,t,n){return c({type:y,payload:{x:e,y:r,char:t,properties:n}})},q=function(e,r,t){return c({type:g,payload:{x:e,y:r,handleClick:t}})},F=function(e){return c({type:b,payload:{player:e,score:1}})};window.increment=F,window.reset=function(){return c({type:m})},window.setTile=X;var z=Object(a.useRef)(),Q=Math.floor(document.body.clientWidth/6.61),V=Math.floor(document.body.clientHeight/14);Q%2===0&&Q--,V%2===0&&V--,Object(a.useEffect)((function(){for(var e=[],r=0;r<V;r++){for(var t=[],n=0;n<Q;n++){var a={char:s(),properties:{active:!1}};t.push(a)}e.push(t)}c({type:h,payload:e}),Z(),fe()}),[]);var Z=function(){for(var e=l(),r=(Q-1)/2-(e[0].length-1)/2,t=(V-1)/2-(e.length-1)/2,n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++){var c=e[n][a].char;if(" "!==c){var o={active:!0};(7===n&&a>=20&&a<=33||8===n&&[20,26,27,33].includes(a)||9===n&&a>=20&&a<=33)&&(o.selected=!0),X(a+r,n+t,c,o)}}$(r,t)},$=function(e,r){for(var t=7;t<=9;t++)for(var n=3;n<=16;n++){q(n+e,t+r,(function(){return _(e,r,1)}))}for(var a=7;a<=9;a++)for(var c=20;c<=33;c++){q(c+e,a+r,(function(){return _(e,r,2)}))}for(var o=12;o<=14;o++)for(var i=9;i<=27;i++){q(i+e,o+r,ee)}},_=function(e,r,t){console.log("".concat(t,"P")),function(e,r,t){c({type:x,payload:{offsetX:e,offsetY:r,players:t}})}(e,r,t)},ee=function(){console.log("START GAME"),re(),oe(),k(!0),L.current=!0},re=function(){console.log("CLEAR LANDING");for(var e=l(),r=(Q-1)/2-(e[0].length-1)/2,t=(V-1)/2-(e.length-1)/2,n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++){if(" "!==e[n][a].char){var c=s();X(a+r,n+t,c,{active:!1,clickable:!1,handleClick:void 0})}}},te=(Q-1)/2,ne=(V-1)/2,ae=45,ce=12,oe=function(){console.log("SETUP GAME AREA"),ie(),le(),ve(),he({x:te,y:ne}),setInterval((function(){ye()}),1e3/30)},ie=function(){for(var e=te-ae,r=te+ae,t=ne-ce,n=ne+ce,a=t;a<=n;a++)for(var c=e;c<=r;c++)a===t||a===n?X(c,a,"-",{active:!0}):c===e||c===r?X(c,a,"|",{active:!0}):c===te&&X(c,a,":",{active:!0})},ue=te-7,se=te+3,le=function(){for(var e=p(0),r=0;r<5;r++)for(var t=0;t<5;t++){var n=e[r][t];" "!==n&&X(t+ue,r+1,n,{active:!0})}X(te,2,"\u25cf",{active:!0}),X(te,4,"\u25cf",{active:!0});for(var a=0;a<5;a++)for(var c=0;c<5;c++){var o=e[a][c];" "!==o&&X(c+se,a+1,o,{active:!0})}};Object(a.useEffect)((function(){if(0!==t.gameState.score.p1&&t.gameState.score.p1<=7){console.log("P1 Score changed");for(var e=t.gameState.score.p1-1,r=e+1,n=p(e),a=p(r),c=0;c<5;c++)for(var o=0;o<5;o++){var i=a[c][o];i!==n[c][o]&&(" "===i?X(o+ue,c+1,s(),{active:!1}):X(o+ue,c+1,i,{active:!0}))}7===t.gameState.score.p1&&console.log("P1 wins")}}),[t.gameState.score.p1]),Object(a.useEffect)((function(){if(0!==t.gameState.score.p2&&t.gameState.score.p2<=7){console.log("P2 Score changed");for(var e=t.gameState.score.p2-1,r=e+1,n=p(e),a=p(r),c=0;c<5;c++)for(var o=0;o<5;o++){var i=a[c][o];i!==n[c][o]&&(" "===i?X(o+se,c+1,s(),{active:!1}):X(o+se,c+1,i,{active:!0}))}7===t.gameState.score.p2&&console.log("P2 wins")}}),[t.gameState.score.p2]);var fe=function(){document.addEventListener("keydown",(function(e){if(L.current){var r=ne-ce+(pe-1)/2+1,t=ne+ce-(pe-1)/2-1;switch(e.code){case"KeyW":A.current!==r&&(v(A.current-1),A.current--,de(1,A.current,-1));break;case"KeyS":A.current!==t&&(v(A.current+1),A.current++,de(1,A.current,1));break;case"ArrowUp":P.current!==r&&(E(P.current-1),P.current--,de(2,P.current,-1));break;case"ArrowDown":P.current!==t&&(E(P.current+1),P.current++,de(2,P.current,1))}}}))},pe=3,ve=function(){var e=te-ae+1;X(e,ne-(pe-1)/2,"\u2588",{active:!0}),X(e,ne,"\u2588",{active:!0}),X(e,ne+(pe-1)/2,"\u2588",{active:!0}),v(ne),A.current=ne;var r=te+ae-1;X(r,ne-(pe-1)/2,"\u2588",{active:!0}),X(r,ne,"\u2588",{active:!0}),X(r,ne+(pe-1)/2,"\u2588",{active:!0}),E(ne),P.current=ne},de=function(e,r,t){var n=1===e?te-ae+1:te+ae-1;-1===t?(X(n,r+2,s(),{active:!1}),X(n,r-1,"\u2588",{active:!0})):(X(n,r-2,s(),{active:!1}),X(n,r+1,"\u2588",{active:!0}))},he=function(e){var r=e.x,t=e.y;X(Math.round(U.current.x),Math.round(U.current.y),s(),{active:!1,isBall:!1}),Y({x:r,y:t}),U.current={x:r,y:t},X(Math.round(r),Math.round(t),"\u25cf",{active:!0,isBall:!0})},ye=function(){var e=U.current.x+1*J.current.x,r=U.current.y+1*J.current.y,t={x:e,y:r};if(e<=te-ae+1&&r<=A.current+1&&r>=A.current-1||e>=te+ae-1&&r<=P.current+1&&r>=P.current-1){t.x=U.current.x+1*-J.current.x;var n={x:-J.current.x,y:J.current.y};G(n),J.current=n}else if(e<=te-ae||e>=te+ae){Y(t={x:te,y:ne});var a=I();G(a),J.current=a,e>=te+ae?(console.log("RIGHT WALL"),F(1)):(console.log("LEFT WALL"),F(2))}if(r<=ne-ce||r>=ne+ce){console.log("TOP/BOTTOM WALL"),t.y=U.current.y+1*-J.current.y;var c={x:J.current.x,y:-J.current.y};G(c),J.current=c}he(t)};return Object(n.jsx)("div",{className:"app",ref:z,children:Object(n.jsx)("ul",{className:"rows",children:t.tileMatrix.map((function(e,r){return Object(n.jsx)("li",{className:"row-".concat(r),children:e.map((function(e,t){return Object(n.jsx)(d,{char:e.char,active:e.properties.active,selected:e.properties.selected,handleClick:e.properties.handleClick,isBall:e.properties.isBall},"".concat(r,"-").concat(t))}))},"row-".concat(r))}))})})};i.a.render(Object(n.jsx)(M,{}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.a84ad42d.chunk.js.map