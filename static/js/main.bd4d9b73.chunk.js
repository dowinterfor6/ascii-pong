(this["webpackJsonpascii-pong"]=this["webpackJsonpascii-pong"]||[]).push([[0],{10:function(e,r,t){},11:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t(1),c=t.n(a),o=t(4),i=t.n(o),s=(t(10),t(2)),u=function(){for(var e=[],r=33;r<=255;r++)(r<127||r>160)&&e.push(r);var t=e[Math.round(Math.random()*e.length)];return String.fromCharCode(t)},l=function(e,r){for(var t="\n    <section>----------------------------\n    |                                   |\n    |                                   |\n    |        <h1>ASCII Pong</h1>        |\n    |                                   |\n    |                                   |\n    |                                   |\n    |  <option>------   <option>------  |\n    |  |     1P     |   |     2P     |  |\n    |  -----</option>   -----</option>  |\n    |                                   |\n    |                                   |\n    |        <button>-----------        |\n    |        |      Start      |        |\n    |        ----------</button>        |\n    |                                   |\n    |                                   |\n    |                                   |\n    ---------------------------</section>".split("\n").filter((function(e){return""!==e})).map((function(e){return e.trim()})),n=[],a=0;a<t.length;a++){for(var c=[],o=0;o<t[0].length;o++)c.push({char:t[a][o]});n.push(c)}return n},f=["\n \u2588\u2588\u2588 \n\u2588   \u2588\n\u2588   \u2588\n\u2588   \u2588\n \u2588\u2588\u2588 ","\n    \u2588\n    \u2588\n    \u2588\n    \u2588\n    \u2588","\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588\n\u2588    \n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588   \u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n    \u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588    \n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588    \n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n    \u2588\n    \u2588\n    \u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588"],v=function(e){return f[e].split("\n").filter((function(e){return""!==e})).map((function(e){return e.split("")}))},d=function(e){for(var r="P".concat(e),t="\n    <section>------------------------------------------\n    |                                                 |\n    |                                                 |\n    |        <h1>Congratulations, ".concat(r," won!</h1>        |\n    |                                                 |\n    |                                                 |\n    |                                                 |\n    |                                                 |\n    |            <button>----------------             |\n    |            |      Main Menu       |             |\n    |            ---------------</button>             |\n    |                                                 |\n    |                                                 |\n    |                                                 |\n    -----------------------------------------</section>").split("\n").filter((function(e){return""!==e})).map((function(e){return e.trim()})),n=[],a=0;a<t.length;a++){for(var c=[],o=0;o<t[0].length;o++)c.push({char:t[a][o]});n.push(c)}return n},p=function(){for(var e="\n    <footer>-----------------------------------------------------------------------------------\n    | <h2>Controls & Disclaimer</h2>                                                          |\n    | <p>                                                                                     |\n    |    P1 uses W & S, P2 uses \u2191 & \u2193. Winning score is 7. Game is not designed for small     |\n    |    screens. Game performance may suffer on low spec systems. Batteries not included.    |\n    | </p>                                                                                    |\n    ----------------------------------------------------------------------------------</footer>".split("\n").filter((function(e){return""!==e})).map((function(e){return e.trim()})),r=[],t=0;t<e.length;t++){for(var n=[],a=0;a<e[0].length;a++)n.push({char:e[t][a]});r.push(n)}return r};window.getLanding=l,window.getNum=v,window.getWin=d,window.disclaimer=p;var h=function(){return Object(n.jsx)("div",{className:"center-tile",children:":"})},b=c.a.memo(h),j=function(e){var r=e.char,t=e.active,c=e.selected,o=e.handleClick,i=e.isBall,s=e.isPaddle,u=Object(a.useRef)();return Object(n.jsx)("div",{className:"\n        char-tile\n        ".concat(t?"active":"","\n        ").concat(c?"selected":"","\n        ").concat(o?"is-clickable":"","\n        ").concat(i?"ball":"","\n        ").concat(s?"paddle":"","\n      "),ref:u,onClick:o,children:r})},y=c.a.memo(j),x=function(e){var r=e.style;return Object(n.jsx)("div",{className:"horizontal-wall",style:r,children:"---------------------------------------------------------------------------------------------"})},m=c.a.memo(x),O=function(e){var r=e.style;return Object(n.jsxs)("div",{className:"vertical-wall",style:r,children:["|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{}),"|",Object(n.jsx)("br",{})]})},g=c.a.memo(O),M="SETTILES",w="SETTILE",S="SETCLICKHANDLER",P="SETPLAYERS",E="INCREMENTSCORE",C="RESETSCORE",R=function(e,r){var t,n,a=Object.assign({},e);switch(r.type){case M:return a.tileMatrix=r.payload,a;case w:t=r.payload.x,n=r.payload.y;var c=r.payload,o=c.char,i=c.properties;return a.tileMatrix[n][t].char=o,a.tileMatrix[n][t].properties=i,a;case S:t=r.payload.x,n=r.payload.y;var s=r.payload.handleClick;return a.tileMatrix[n][t].properties.handleClick=s,a;case P:var u=r.payload,l=u.offsetX,f=u.offsetY;if(a.players=r.payload.players,1===a.players){for(var v=7;v<=9;v++)for(var d=3;d<=16;d++)8===v?[3,9,10,16].includes(d)&&(a.tileMatrix[v+f][d+l].properties.selected=!0):a.tileMatrix[v+f][d+l].properties.selected=!0;for(var p=7;p<=9;p++)for(var h=20;h<=33;h++)8===p?[20,26,27,33].includes(h)&&(a.tileMatrix[p+f][h+l].properties.selected=!1):a.tileMatrix[p+f][h+l].properties.selected=!1}else{for(var b=7;b<=9;b++)for(var j=3;j<=16;j++)8===b?[3,9,10,16].includes(j)&&(a.tileMatrix[b+f][j+l].properties.selected=!1):a.tileMatrix[b+f][j+l].properties.selected=!1;for(var y=7;y<=9;y++)for(var x=20;x<=33;x++)8===y?[20,26,27,33].includes(x)&&(a.tileMatrix[y+f][x+l].properties.selected=!0):a.tileMatrix[y+f][x+l].properties.selected=!0}return a;case E:var m=e.gameState.score["p".concat(r.payload.player)];return a.gameState.score["p".concat(r.payload.player)]=m+r.payload.score,a;case C:return a.gameState.score.p1=0,a.gameState.score.p2=0,a;default:return e}},k={tileMatrix:[],players:1,gameState:{landing:!0,game:!1,winner:void 0,score:{p1:0,p2:0}}},A=function(){var e=Object(a.useReducer)(R,k),r=Object(s.a)(e,2),t=r[0],c=r[1],o=Object(a.useState)(),i=Object(s.a)(o,2),f=(i[0],i[1]),h=Object(a.useState)(),j=Object(s.a)(h,2),x=(j[0],j[1]),O=Object(a.useState)(!1),A=Object(s.a)(O,2),K=A[0],N=A[1],I=Object(a.useRef)(K),W=function(){var e=.5*Math.random()+.5,r=Math.random(),t=0===Math.round(Math.random())?-1:1,n=0===Math.round(Math.random())?-1:1,a=Math.sqrt(Math.pow(e,2)+Math.pow(r,2));return{x:t*e/a,y:n*r/a}},T=Object(a.useState)(W()),D=Object(s.a)(T,2),L=D[0],B=D[1],U=Object(a.useState)({x:0,y:0}),Y=Object(s.a)(U,2),q=Y[0],G=Y[1],H=Object(a.useRef)(L),J=Object(a.useRef)(q),X=Object(a.useRef)(0),z=Object(a.useRef)(0),F=Object(a.useRef)(0),Q=Object(a.useRef)(0),V=Object(a.useRef)(),Z=["KeyW","KeyS","ArrowUp","ArrowDown"],$=Object(a.useRef)(1),_=Object(a.useRef)({KeyW:!1,KeyS:!1,ArrowUp:!1,ArrowDown:!1}),ee=function(e,r,t,n){return c({type:w,payload:{x:e,y:r,char:t,properties:n}})},re=function(e,r,t){return c({type:S,payload:{x:e,y:r,handleClick:t}})},te=function(e){return c({type:E,payload:{player:e,score:1}})},ne=function(){return c({type:C})};window.increment=te,window.reset=ne,window.setTile=ee;var ae=Object(a.useRef)(),ce=Math.floor(document.body.clientWidth/9),oe=Math.floor(document.body.clientHeight/19);ce%2===0&&ce--,oe%2===0&&oe--,Object(a.useEffect)((function(){for(var e=[],r=0;r<oe;r++){for(var t=[],n=0;n<ce;n++){var a={char:u(),properties:{active:!1}};t.push(a)}e.push(t)}c({type:M,payload:e}),ie(),He(),Ce()}),[]);var ie=function(){for(var e=l(),r=(ce-1)/2-(e[0].length-1)/2,t=(oe-1)/2-(e.length-1)/2,n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++){var c=e[n][a].char;if(" "!==c){var o={active:!0};(7===n&&a>=3&&a<=16||8===n&&[3,9,10,16].includes(a)||9===n&&a>=3&&a<=16)&&(o.selected=!0),ee(a+r,n+t,c,o)}}se(r,t)},se=function(e,r){for(var t=7;t<=9;t++)for(var n=3;n<=16;n++){re(n+e,t+r,(function(){return ue(e,r,1)}))}for(var a=7;a<=9;a++)for(var c=20;c<=33;c++){re(c+e,a+r,(function(){return ue(e,r,2)}))}for(var o=12;o<=14;o++)for(var i=9;i<=27;i++){re(i+e,o+r,le)}},ue=function(e,r,t){$.current=t,function(e,r,t){c({type:P,payload:{offsetX:e,offsetY:r,players:t}})}(e,r,t)},le=function(){fe(),N(!0),I.current=!0,je()},fe=function(){for(var e=l(),r=(ce-1)/2-(e[0].length-1)/2,t=(oe-1)/2-(e.length-1)/2,n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++){if(" "!==e[n][a].char){var c=u();ee(a+r,n+t,c,{active:!1,handleClick:void 0})}re(a+r,n+t,void 0)}},ve=(ce-1)/2,de=(oe-1)/2,pe=45,he=12,be=1.5,je=function(){ye(),ge(),Re(),Ae({x:ve,y:de}),V.current=setInterval((function(){I.current&&(Ke(),Ie())}),200)},ye=function(){for(var e=ve-pe,r=ve+pe,t=de-he,n=de+he,a=t;a<=n;a++)for(var c=e;c<=r;c++)a===t||a===n?ee(c,a,"-",{active:!0}):c!==e&&c!==r||ee(c,a,"|",{active:!0})},xe=de-he-2,me=ve-7,Oe=ve+3,ge=function(){for(var e=xe-4,r=xe,t=v(0),n=0;n<5;n++)for(var a=0;a<5;a++){var c=t[n][a];" "!==c&&ee(a+me,n+xe-4,c,{active:!0})}ee(ve,e+1,"\u25cf",{active:!0}),ee(ve,r-1,"\u25cf",{active:!0});for(var o=0;o<5;o++)for(var i=0;i<5;i++){var s=t[o][i];" "!==s&&ee(i+Oe,o+xe-4,s,{active:!0})}};Object(a.useEffect)((function(){if(0!==t.gameState.score.p1&&t.gameState.score.p1<=7){for(var e=t.gameState.score.p1-1,r=e+1,n=v(e),a=v(r),c=0;c<5;c++)for(var o=0;o<5;o++){var i=a[c][o];i!==n[c][o]&&(" "===i?ee(o+me,c+xe-4,u(),{active:!1}):ee(o+me,c+xe-4,i,{active:!0}))}7===t.gameState.score.p1&&(N(!1),I.current=!1,clearInterval(V.current),We(1))}}),[t.gameState.score.p1]),Object(a.useEffect)((function(){if(0!==t.gameState.score.p2&&t.gameState.score.p2<=7){for(var e=t.gameState.score.p2-1,r=e+1,n=v(e),a=v(r),c=0;c<5;c++)for(var o=0;o<5;o++){var i=a[c][o];i!==n[c][o]&&(" "===i?ee(o+Oe,c+xe-4,u(),{active:!1}):ee(o+Oe,c+xe-4,i,{active:!0}))}7===t.gameState.score.p2&&(N(!1),I.current=!1,clearInterval(V.current),We(2))}}),[t.gameState.score.p2]);var Me,we,Se,Pe,Ee,Ce=function(){document.addEventListener("keyup",(function(e){I.current&&Z.includes(e.code)&&(_.current[e.code]=!1)})),document.addEventListener("keydown",(function(e){if(I.current&&Z.includes(e.code))switch(e.code){case"KeyW":_.current.KeyW=!0,_.current.KeyS=!1;break;case"KeyS":_.current.KeyW=!1,_.current.KeyS=!0;break;case"ArrowUp":_.current.ArrowUp=!0,_.current.ArrowDown=!1;break;case"ArrowDown":_.current.ArrowUp=!1,_.current.ArrowDown=!0}}))},Re=function(){var e=ve-pe+1;ee(e,de-1,"\u2588",{active:!0}),ee(e,de,"\u2588",{active:!0}),ee(e,de+1,"\u2588",{active:!0}),f(de);var r=ve+pe-1;ee(r,de-1,"\u2588",{active:!0}),ee(r,de,"\u2588",{active:!0}),ee(r,de+1,"\u2588",{active:!0}),x(de)},ke=function(e){var r=1===e?ve-pe+1:ve+pe-1;if(1===e){if(X.current>=11||X.current<=-11)X.current=F.current;else if(F.current!==X.current){var t=de+F.current,n=de+X.current;ee(r,t-1,u(),{active:!1,isPaddle:!1}),ee(r,t,u(),{active:!1,isPaddle:!1}),ee(r,t+1,u(),{active:!1,isPaddle:!1}),ee(r,n-1,"\u2588",{active:!0,isPaddle:!0}),ee(r,n,"\u2588",{active:!0,isPaddle:!0}),ee(r,n+1,"\u2588",{active:!0,isPaddle:!0}),F.current=X.current}}else if(2===e){if(z.current>=11||z.current<=-11)z.current=Q.current;else if(Q.current!==z.current){var a=de+Q.current,c=de+z.current;ee(r,a-1,u(),{active:!1,isPaddle:!1}),ee(r,a,u(),{active:!1,isPaddle:!1}),ee(r,a+1,u(),{active:!1,isPaddle:!1}),ee(r,c-1,"\u2588",{active:!0,isPaddle:!0}),ee(r,c,"\u2588",{active:!0,isPaddle:!0}),ee(r,c+1,"\u2588",{active:!0,isPaddle:!0}),Q.current=z.current}}},Ae=function(e){var r=e.x,t=e.y;ee(Math.round(J.current.x),Math.round(J.current.y),u(),{active:!1,isBall:!1}),I.current&&(G({x:r,y:t}),J.current={x:r,y:t},ee(Math.round(r),Math.round(t),"\u25cf",{active:!0,isBall:!0}))},Ke=function(){var e=J.current.x+H.current.x*be,r=J.current.y+H.current.y*be,t={x:e,y:r},n=.5,a=ve-pe+1,c=ve+pe-1,o=de+X.current,i=de+z.current;if(Math.round(e)<=a&&Math.round(r)<=o+1+n&&Math.round(r)>=o-1-n||Math.round(e)>=c&&Math.round(r)<=i+1+n&&Math.round(r)>=i-1-n){var s=Math.round(e)<=ve-pe+1?o:i,u=Ne(r,s,-H.current.x);t.x=J.current.x+u.x*be,t.y=J.current.y+u.y*be,B(u),H.current=u}else if(Math.round(e)<=ve-pe||Math.round(e)>=ve+pe){G(t={x:ve,y:de});var l=W();B(l),H.current=l,Math.round(e)>=ve+pe?te(1):te(2)}if(Math.round(r)<=de-he||Math.round(r)>=de+he){t.y=J.current.y+-H.current.y*be;var f={x:H.current.x,y:-H.current.y};B(f),H.current=f}Ae(t)},Ne=function(e,r,t){var n=(e-r)/1.5*Math.PI,a=Math.PI-1.5;Math.abs(n)>=a&&(n=n>0?a:-a);var c=t/Math.abs(t)*Math.tan(Math.abs(n)),o=Math.sqrt(1+Math.pow(c,2));return{y:n/Math.abs(n)/o,x:c/o}},Ie=function(){if(_.current.KeyW?X.current--:_.current.KeyS&&X.current++,ke(1),2===$.current)_.current.ArrowUp?z.current--:_.current.ArrowDown&&z.current++,ke(2);else{if(Math.random()<.85)J.current.y>de+Q.current?z.current++:J.current.y<de+Q.current&&z.current--;else{var e=2*Math.random()-1;e>.75?z.current--:e<-.75&&z.current++}ke(2)}},We=function(e){for(var r=d(e),t=(ce-1)/2-(r[0].length-1)/2,n=(oe-1)/2-(r.length-1)/2,a=0;a<r.length;a++)for(var c=0;c<r[0].length;c++){var o=r[a][c].char;if(" "!==o){ee(c+t,a+n,o,{active:!0})}}De()},Te=function(){Le(),Be(),Ue(),ne(),Ye(),ie()},De=function(){for(var e=de+1;e<=de+3;e++)for(var r=ve-12;r<=ve+11;r++)re(r,e,Te)},Le=function(){for(var e=d(1),r=(ce-1)/2-(e[0].length-1)/2,t=(oe-1)/2-(e.length-1)/2,n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++){if(" "!==e[n][a].char){var c={active:!1,handleClick:void 0};ee(a+r,n+t,u(),c)}}},Be=function(){for(var e=ve-pe,r=ve+pe,t=de-he,n=de+he,a=t;a<=n;a++)for(var c=e;c<=r;c++)a===t||a===n?ee(c,a,u(),{active:!1}):c!==e&&c!==r||ee(c,a,u(),{active:!1})},Ue=function(){for(var e=xe-4,r=xe,n=t.gameState.score.p1,a=v(n),c=0;c<5;c++)for(var o=0;o<5;o++){" "!==a[c][o]&&ee(o+me,c+xe-4,u(),{active:!1})}ee(ve,e+1,u(),{active:!1}),ee(ve,r-1,u(),{active:!1});for(var i=t.gameState.score.p2,s=v(i),l=0;l<5;l++)for(var f=0;f<5;f++){" "!==s[l][f]&&ee(f+Oe,l+xe-4,u(),{active:!1})}},Ye=function(){var e=ve-pe+1,r=de+X.current;ee(e,r-1,u(),{active:!1}),ee(e,r,u(),{active:!1}),ee(e,r+1,u(),{active:!1});var t=ve+pe-1,n=de+z.current;ee(t,n-1,u(),{active:!1}),ee(t,n,u(),{active:!1}),ee(t,n+1,u(),{active:!1})};if(K){for(var qe=[],Ge=0;Ge<23;Ge++)qe.push(Object(n.jsx)(b,{}));Me=Object(n.jsx)("div",{className:"center-line",style:{top:19*(de-he+2)-11.5,left:9*ve+1},children:qe.map((function(e,r){return Object(n.jsx)("div",{className:"center-tile",children:e},"center-".concat(r))}))}),we=Object(n.jsx)(g,{style:{top:19*(de-he+2)-11.5,left:9*(ve-pe)+1}}),Se=Object(n.jsx)(g,{style:{top:19*(de-he+2)-11.5,left:9*(ve+pe)+1}}),Pe=Object(n.jsx)(m,{style:{top:19*(de-he+2)-30.5,left:9*(ve-pe)+1}}),Ee=Object(n.jsx)(m,{style:{top:19*(de+he-2)+45.5,left:9*(ve-pe)+1}})}var He=function(){for(var e=p(),r=(ce-1)/2-(e[0].length-1)/2,t=oe-1-(e.length-1),n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++){var c=e[n][a].char;if(" "!==c){ee(a+r,n+t,c,{active:!0})}}};return Object(n.jsxs)("div",{className:"app",ref:ae,children:[Object(n.jsx)("ul",{className:"rows",children:t.tileMatrix.map((function(e,r){return Object(n.jsx)("li",{className:"row-".concat(r),children:e.map((function(e,t){return Object(n.jsx)(y,{char:e.char,active:e.properties.active,selected:e.properties.selected,handleClick:e.properties.handleClick,isBall:e.properties.isBall,isPaddle:e.properties.isPaddle},"".concat(r,"-").concat(t))}))},"row-".concat(r))}))}),Me,we,Se,Pe,Ee]})};i.a.render(Object(n.jsx)(A,{}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.bd4d9b73.chunk.js.map