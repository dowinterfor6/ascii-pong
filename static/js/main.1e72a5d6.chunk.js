(this["webpackJsonpascii-pong"]=this["webpackJsonpascii-pong"]||[]).push([[0],{10:function(e,t,r){},11:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),c=r.n(a),o=r(4),i=r.n(o),u=(r(10),r(2)),s=function(){for(var e=[],t=33;t<=255;t++)(t<127||t>160)&&e.push(t);var r=e[Math.round(Math.random()*e.length)];return String.fromCharCode(r)},l=function(e,t){for(var r="\n    <section>----------------------------\n    |                                   |\n    |                                   |\n    |        <h1>ASCII Pong</h1>        |\n    |                                   |\n    |                                   |\n    |                                   |\n    |  <option>------   <option>------  |\n    |  |     1P     |   |     2P     |  |\n    |  -----</option>   -----</option>  |\n    |                                   |\n    |                                   |\n    |        <button>-----------        |\n    |        |      Start      |        |\n    |        ----------</button>        |\n    |                                   |\n    |                                   |\n    |                                   |\n    ---------------------------</section>".split("\n").filter((function(e){return""!==e})).map((function(e){return e.trim()})),n=[],a=0;a<r.length;a++){for(var c=[],o=0;o<r[0].length;o++)c.push({char:r[a][o]});n.push(c)}return n},f=["\n \u2588\u2588\u2588 \n\u2588   \u2588\n\u2588   \u2588\n\u2588   \u2588\n \u2588\u2588\u2588 ","\n    \u2588\n    \u2588\n    \u2588\n    \u2588\n    \u2588","\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588\n\u2588    \n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588   \u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n    \u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588    \n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588    \n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n    \u2588\n    \u2588\n    \u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588","\n\u2588\u2588\u2588\u2588\u2588\n\u2588   \u2588\n\u2588\u2588\u2588\u2588\u2588\n    \u2588\n\u2588\u2588\u2588\u2588\u2588"],p=function(e){return f[e].split("\n").filter((function(e){return""!==e})).map((function(e){return e.split("")}))};window.getLanding=l,window.getNum=p;var v=function(e){var t=e.char,r=e.active,c=e.selected,o=e.handleClick,i=e.isBall,u=Object(a.useRef)();return Object(n.jsx)("div",{className:"\n        char-tile\n        ".concat(r?"active":"","\n        ").concat(c?"selected":"","\n        ").concat(o?"is-clickable":"","\n        ").concat(i?"ball":"","\n      "),ref:u,onClick:o,children:t})},d=c.a.memo(v),h="SETTILES",y="SETTILE",M="SETCLICKHANDLER",g="SETPLAYERS",b="INCREMENTSCORE",x="RESETSCORE",m=function(e,t){var r,n,a=Object.assign({},e);switch(t.type){case h:return a.tileMatrix=t.payload,a;case y:r=t.payload.x,n=t.payload.y;var c=t.payload,o=c.char,i=c.properties;return a.tileMatrix[n][r].char=o,a.tileMatrix[n][r].properties=i,a;case M:r=t.payload.x,n=t.payload.y;var u=t.payload.handleClick;return a.tileMatrix[n][r].properties.handleClick=u,a;case g:var s=t.payload,l=s.offsetX,f=s.offsetY;if(a.players=t.payload.players,1===a.players){for(var p=7;p<=9;p++)for(var v=3;v<=16;v++)8===p?[3,9,10,16].includes(v)&&(a.tileMatrix[p+f][v+l].properties.selected=!0):a.tileMatrix[p+f][v+l].properties.selected=!0;for(var d=7;d<=9;d++)for(var m=20;m<=33;m++)8===d?[20,26,27,33].includes(m)&&(a.tileMatrix[d+f][m+l].properties.selected=!1):a.tileMatrix[d+f][m+l].properties.selected=!1}else{for(var j=7;j<=9;j++)for(var S=3;S<=16;S++)8===j?[3,9,10,16].includes(S)&&(a.tileMatrix[j+f][S+l].properties.selected=!1):a.tileMatrix[j+f][S+l].properties.selected=!1;for(var O=7;O<=9;O++)for(var w=20;w<=33;w++)8===O?[20,26,27,33].includes(w)&&(a.tileMatrix[O+f][w+l].properties.selected=!0):a.tileMatrix[O+f][w+l].properties.selected=!0}return a;case b:var E=e.gameState.score["p".concat(t.payload.player)];return a.gameState.score["p".concat(t.payload.player)]=E+t.payload.score,a;case x:return a.gameState.score.p1=0,a.gameState.score.p2=0,a;default:return e}},j={tileMatrix:[],players:2,gameState:{landing:!0,game:!1,winnder:void 0,score:{p1:0,p2:0}}},S=function(){var e=Object(a.useReducer)(m,j),t=Object(u.a)(e,2),r=t[0],c=t[1],o=Object(a.useState)(),i=Object(u.a)(o,2),f=i[0],v=i[1],S=Object(a.useState)(),O=Object(u.a)(S,2),w=O[0],E=O[1],R=Object(a.useState)(!1),C=Object(u.a)(R,2),k=C[0],A=C[1],L=Object(a.useRef)(k),T=Object(a.useRef)(f),P=Object(a.useRef)(w),I=function(){var e=.5*Math.random()+.5,t=Math.random(),r=0===Math.round(Math.random())?-1:1,n=0===Math.round(Math.random())?-1:1,a=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return{x:r*e/a,y:n*t/a}},N=Object(a.useState)(I()),B=Object(u.a)(N,2),D=B[0],G=B[1],W=Object(a.useState)({x:0,y:0}),H=Object(u.a)(W,2),K=H[0],Y=H[1],q=Object(a.useRef)(D),J=Object(a.useRef)(K),U=Object(a.useRef)(0),X=Object(a.useRef)(0),F=Object(a.useRef)(0),z=Object(a.useRef)(0),Q=function(e,t,r,n){return c({type:y,payload:{x:e,y:t,char:r,properties:n}})},V=function(e,t,r){return c({type:M,payload:{x:e,y:t,handleClick:r}})},Z=function(e){return c({type:b,payload:{player:e,score:1}})};window.increment=Z,window.reset=function(){return c({type:x})},window.setTile=Q;var $=Object(a.useRef)(),_=Math.floor(document.body.clientWidth/9),ee=Math.floor(document.body.clientHeight/19);_%2===0&&_--,ee%2===0&&ee--,Object(a.useEffect)((function(){for(var e=[],t=0;t<ee;t++){for(var r=[],n=0;n<_;n++){var a={char:s(),properties:{active:!1}};r.push(a)}e.push(r)}c({type:h,payload:e}),te(),he()}),[]);var te=function(){for(var e=l(),t=(_-1)/2-(e[0].length-1)/2,r=(ee-1)/2-(e.length-1)/2,n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++){var c=e[n][a].char;if(" "!==c){var o={active:!0};(7===n&&a>=20&&a<=33||8===n&&[20,26,27,33].includes(a)||9===n&&a>=20&&a<=33)&&(o.selected=!0),Q(a+t,n+r,c,o)}}re(t,r)},re=function(e,t){for(var r=7;r<=9;r++)for(var n=3;n<=16;n++){V(n+e,r+t,(function(){return ne(e,t,1)}))}for(var a=7;a<=9;a++)for(var c=20;c<=33;c++){V(c+e,a+t,(function(){return ne(e,t,2)}))}for(var o=12;o<=14;o++)for(var i=9;i<=27;i++){V(i+e,o+t,ae)}},ne=function(e,t,r){console.log("".concat(r,"P")),function(e,t,r){c({type:g,payload:{offsetX:e,offsetY:t,players:r}})}(e,t,r)},ae=function(){console.log("START GAME"),ce(),le(),A(!0),L.current=!0},ce=function(){console.log("CLEAR LANDING");for(var e=l(),t=(_-1)/2-(e[0].length-1)/2,r=(ee-1)/2-(e.length-1)/2,n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++){if(" "!==e[n][a].char){var c=s();Q(a+t,n+r,c,{active:!1,clickable:!1,handleClick:void 0})}}},oe=(_-1)/2,ie=(ee-1)/2,ue=45,se=12,le=function(){console.log("SETUP GAME AREA"),fe(),de(),Me(),be({x:oe,y:ie}),setInterval((function(){xe(),je()}),1e3/30)},fe=function(){for(var e=oe-ue,t=oe+ue,r=ie-se,n=ie+se,a=r;a<=n;a++)for(var c=e;c<=t;c++)a===r||a===n?Q(c,a,"-",{active:!0}):c===e||c===t?Q(c,a,"|",{active:!0}):c===oe&&Q(c,a,":",{active:!0})},pe=oe-7,ve=oe+3,de=function(){for(var e=p(0),t=0;t<5;t++)for(var r=0;r<5;r++){var n=e[t][r];" "!==n&&Q(r+pe,t+1,n,{active:!0})}Q(oe,2,"\u25cf",{active:!0}),Q(oe,4,"\u25cf",{active:!0});for(var a=0;a<5;a++)for(var c=0;c<5;c++){var o=e[a][c];" "!==o&&Q(c+ve,a+1,o,{active:!0})}};Object(a.useEffect)((function(){if(0!==r.gameState.score.p1&&r.gameState.score.p1<=7){console.log("P1 Score changed");for(var e=r.gameState.score.p1-1,t=e+1,n=p(e),a=p(t),c=0;c<5;c++)for(var o=0;o<5;o++){var i=a[c][o];i!==n[c][o]&&(" "===i?Q(o+pe,c+1,s(),{active:!1}):Q(o+pe,c+1,i,{active:!0}))}7===r.gameState.score.p1&&console.log("P1 wins")}}),[r.gameState.score.p1]),Object(a.useEffect)((function(){if(0!==r.gameState.score.p2&&r.gameState.score.p2<=7){console.log("P2 Score changed");for(var e=r.gameState.score.p2-1,t=e+1,n=p(e),a=p(t),c=0;c<5;c++)for(var o=0;o<5;o++){var i=a[c][o];i!==n[c][o]&&(" "===i?Q(o+ve,c+1,s(),{active:!1}):Q(o+ve,c+1,i,{active:!0}))}7===r.gameState.score.p2&&console.log("P2 wins")}}),[r.gameState.score.p2]);var he=function(){document.addEventListener("keydown",(function(e){if(L.current){switch(e.code){case"KeyW":U.current>-10&&U.current--;break;case"KeyS":U.current<10&&U.current++;break;case"ArrowUp":X.current>14&&X.current--;break;case"ArrowDown":X.current<10&&X.current++}}}))},ye=3,Me=function(){var e=oe-ue+1;Q(e,ie-(ye-1)/2,"\u2588",{active:!0}),Q(e,ie,"\u2588",{active:!0}),Q(e,ie+(ye-1)/2,"\u2588",{active:!0}),v(ie),T.current=ie;var t=oe+ue-1;Q(t,ie-(ye-1)/2,"\u2588",{active:!0}),Q(t,ie,"\u2588",{active:!0}),Q(t,ie+(ye-1)/2,"\u2588",{active:!0}),E(ie),P.current=ie},ge=function(e){var t=1===e?oe-ue+1:oe+ue-1;if(1===e){if(F.current!==U.current){var r=ie+F.current,n=ie+U.current;Q(t,r-1,s(),{active:!1}),Q(t,r,s(),{active:!1}),Q(t,r+1,s(),{active:!1}),Q(t,n-1,"\u2588",{active:!0}),Q(t,n,"\u2588",{active:!0}),Q(t,n+1,"\u2588",{active:!0}),F.current=U.current}}else if(2===e){if(z.current!==X.current){var a=ie+z.current,c=ie+X.current;Q(t,a-1,s(),{active:!1}),Q(t,a,s(),{active:!1}),Q(t,a+1,s(),{active:!1}),Q(t,c-1,"\u2588",{active:!0}),Q(t,c,"\u2588",{active:!0}),Q(t,c+1,"\u2588",{active:!0}),z.current=X.current}}},be=function(e){var t=e.x,r=e.y;Q(Math.round(J.current.x),Math.round(J.current.y),s(),{active:!1,isBall:!1}),Y({x:t,y:r}),J.current={x:t,y:r},Q(Math.round(t),Math.round(r),"\u25cf",{active:!0,isBall:!0})},xe=function(){var e=J.current.x+1*q.current.x,t=J.current.y+1*q.current.y,r={x:e,y:t},n=.5;if(Math.round(e)<=oe-ue+1&&Math.round(t)<=T.current+1+n&&Math.round(t)>=T.current-1-n||Math.round(e)>=oe+ue-1&&Math.round(t)<=P.current+1+n&&Math.round(t)>=P.current-1-n){console.log("PADDLE");var a=Math.round(e)<=oe-ue+1?T.current:P.current,c=me(t,a,-q.current.x);r.x=J.current.x+1*c.x,r.y=J.current.y+1*c.y,G(c),q.current=c}else if(Math.round(e)<=oe-ue||Math.round(e)>=oe+ue){Y(r={x:oe,y:ie});var o=I();G(o),q.current=o,Math.round(e)>=oe+ue?(console.log("RIGHT WALL"),Z(1)):(console.log("LEFT WALL"),Z(2))}if(Math.round(t)<=ie-se||Math.round(t)>=ie+se){r.y=J.current.y+1*-q.current.y;var i={x:q.current.x,y:-q.current.y};G(i),q.current=i}be(r)},me=function(e,t,r){var n=(e-t)/1.5*Math.PI,a=Math.PI-1.5;Math.abs(n)>=a&&(n=n>0?a:-a);var c=r/Math.abs(r)*Math.tan(Math.abs(n)),o=Math.sqrt(1+Math.pow(c,2));return{y:n/Math.abs(n)/o,x:c/o}},je=function(){ge(1),ge(2)};return Object(n.jsx)("div",{className:"app",ref:$,children:Object(n.jsx)("ul",{className:"rows",children:r.tileMatrix.map((function(e,t){return Object(n.jsx)("li",{className:"row-".concat(t),children:e.map((function(e,r){return Object(n.jsx)(d,{char:e.char,active:e.properties.active,selected:e.properties.selected,handleClick:e.properties.handleClick,isBall:e.properties.isBall},"".concat(t,"-").concat(r))}))},"row-".concat(t))}))})})};i.a.render(Object(n.jsx)(S,{}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.1e72a5d6.chunk.js.map